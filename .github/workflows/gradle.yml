name: Java CI

on: [push]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2 # 检出代码
    - name: Set up Java
      uses: actions/setup-java@v2 # 设置 Java 环境
      with:
        java-version: '8' # 设置 Java 版本为 8
        distribution: 'adopt' # 使用 AdoptOpenJDK 分发版
    - name: Cache Gradle packages
      uses: actions/cache@v2 # 缓存 Gradle 包
      with:
        path: |
          ~/.gradle/caches # Gradle 缓存目录
          ~/.gradle/wrapper # Gradle wrapper 目录
        key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle*', '**/gradle-wrapper.properties') }} # 缓存键
        restore-keys: ${{ runner.os }}-gradle- # 恢复键
    - name: Grant execute permission for gradlew
      run: chmod +x gradlew # 赋予 gradlew 执行权限
    - name: Display Gradle version
      run: ./gradlew --version # 显示 Gradle 版本
    - name: Build with Gradle
      run: ./gradlew build # 使用 Gradle 构建项目
